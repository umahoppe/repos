<!-- HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ -->
<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>æ°—è±¡ãƒ‡ãƒ¼ã‚¿æ¯”è¼ƒ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
    <h1>ğŸŒ¾ åœ°åŸŸãƒ»å¹´åˆ¥ æ°—è±¡ãƒ‡ãƒ¼ã‚¿æ¯”è¼ƒ</h1>

    <form method="get">
        <label>åœ°åŸŸï¼š</label>
        <select name="location">
            {% for name in location_list %}
            <option value="{{ name }}" {% if location==name %}selected{% endif %}>{{ name }}</option>
            {% endfor %}
        </select>

        <label>æ¯”è¼ƒå¹´ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰ï¼š</label>
        <select name="years" multiple size="6">
            {% for y in valid_years %}
            <option value="{{ y }}" {% if y|string in selected_years %}selected{% endif %}>{{ y }}</option>
            {% endfor %}
        </select>

        <button type="submit">è¡¨ç¤º</button>
    </form>


    {% if error %}
    <p class="error-message">{{ error }}</p>
    {% endif %}

    {% if labels %}
    <canvas id="tempChart" width="600" height="300"></canvas>
    <canvas id="rainChart" width="600" height="300"></canvas>

    <script>
        const labels = {{ labels | safe }};
        const tempData = {{ temp_data | safe }};
        const rainData = {{ rain_data | safe }};

        new Chart(document.getElementById('tempChart'), {
            type: 'line',
            data: { labels: labels, datasets: tempData },
            options: { plugins: { title: { display: true, text: 'æœˆåˆ¥ å¹³å‡æ°—æ¸©ï¼ˆâ„ƒï¼‰' } } }
        });

        new Chart(document.getElementById('rainChart'), {
            type: 'bar',
            data: { labels: labels, datasets: rainData },
            options: { plugins: { title: { display: true, text: 'æœˆåˆ¥ é™æ°´é‡åˆè¨ˆï¼ˆmmï¼‰' } } }
        });
    </script>
    {% endif %}
</body>

</html>
